# day04

## setState 是同步还是异步

1. setState 既可以是异步,也可以是同步
    - 在`定时器`或者`原生DOM事件`中,setState是同步调用
    - 在`React合成事件`和`生命周期函数`中,setStata是异步调用

2. setState调用时传入的是对象(异步调用):
    - 多次调用setState,最终会将传入的实参对象合并为一个实参,进行一次调用
   setState调用时传入的是函数:
    - 多次调用setState,最终会将传入的数据只有最后一次生效,进行一次调用

## 谈谈闭包

1. 闭包是内层函数引用外层函数的变量对象
2. 闭包的产生,是因为函数嵌套函数,内层函数引用外层函数的局部变量,外层函数执行后,因其变量被内层函数引用,所以会将被引用的变量打包成一个对象挂载到内层函数的[[scope]]属性上
3. 闭包的作用,可以在函数外面操作函数内部的局部变量
4. 闭包的缺陷,因为变量被内存函数引用,这些变量会一直存在内存中,会出现内存泄露的问题

## 谈谈跨域

1. 跨域的产生,源于浏览器的同源策略
2. 浏览器的同源策源,会限制页面向其他服务器发送 ajax 请求
3. 所谓跨域,就是协议,域名,或端口号任意一项不同
4. 跨域主要有两种解决方案:
   - `jsonp`
     jsonp 实现跨域的原理,是因为 script 的 src 不受浏览器同源策略的限制,通过定义函数,将函数名以查询字符串的形式,发送给服务器,服务器响应该函数传参调用,则在页面 script 的函数中可以获取到传递进来的数据
   - `cors(跨域资源共享)`
     cors 实现跨域,不需要前端进行任何,只需要服务器端在对应接口,设置允许跨域请求的响应头即可,页面向服务端发送请求后,服务器向页面响应数据时携带允许跨域的响应头即可
